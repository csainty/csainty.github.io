<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/images/favicon.png" />
    <style>
    html,body,li,p{margin:0;padding:0}p,ul,ol,.highlight{margin:1.6em 0}h1,h2,h3,h4{margin:0;padding:0;font-size:100%;font-weight:bold;text-rendering:optimizeLegibility;font-family:sans-serif}ul{list-style:none}html{box-sizing:border-box;font-size:62.5%}*{box-sizing:inherit}*:before,*:after{box-sizing:inherit}img{height:auto;max-width:100%}pre,code{font-family:monospace;margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:1rem 0;padding:0}blockquote{font-style:italic;margin:1.6em 0 1.6em -2.2em;padding:0 0 0 1.6em;border-left:#4a4a4a 0.4em solid}html{font-size:16px}@media screen and (min-width: 900px){html{font-size:18px}}@media screen and (min-width: 1200px){html{font-size:20px}}body{font-family:serif;color:#3A4145}h1{font-size:2rem;margin:10px 0 10px 0;letter-spacing:-1px}h2{font-size:1.4rem;letter-spacing:-1px}h3{font-size:1.2rem}h4{font-size:1.1rem}a:link,a:visited{color:inherit;text-decoration:none}a:hover{color:#57A3E8;transition:color ease 0.3s}p a:link,p a:visited{text-decoration:underline}pre{border:1px solid #E3EDF3;padding:10px;font-size:0.85em;border-radius:3px}code{padding:1px 3px;font-size:0.85em;white-space:pre;border:1px solid #E3EDF3;background:#F7FAFB;border-radius:2px}pre code{background:transparent;padding:0;border:0}.m-h{text-align:center;background-color:#303538;color:#fff;padding:1rem}.m-h h2{font-weight:normal;font-size:1.5rem}article{width:80%;margin:1rem auto;padding-bottom:1rem;border-bottom:#EBF2F6 1px solid;word-break:break-word;position:relative}article::after{display:block;content:"";width:7px;height:7px;border:#E7EEF2 1px solid;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:#fff 0 0 0 5px}.a-m{color:#9EABB3;font-size:0.8rem}.a-m a:hover{color:#9EABB3;text-decoration:underline}.a-h{margin-bottom:5px}.r-m{font-size:smaller}nav{position:relative;width:75%;margin:1rem auto;font-size:0.8rem;color:#9EABB3;text-align:center}.m-f{position:relative;margin:2rem 0 0 0;padding:1rem 1rem 2rem 1rem;border-top:#EBF2F6 1px solid;font-size:0.8rem;line-height:1.7em;color:#BBC7CC;text-align:center;background:#F7FAFB}.o-p,.n-p{position:absolute;display:inline-block;padding:0 0.5rem;border:#EBF2F6 2px solid;text-decoration:none;border-radius:30px;transition:border ease 0.3s}.o-p{right:0}.n-p{left:0}.t-h{width:80%;margin:0 auto}.highlight pre{background-color:#49483e;color:white;overflow:scroll}.ge{font-style:italic}.gs{font-weight:bold}.c,.cm,.cp,.c1,.gu,.cs{color:#75715e}.k,.kc,.kd,.kp,.kr,.no,.kt{color:#66d9ef}.l,.mf,.mh,.mi,.mo,.se,.il,.m{color:#ae81ff}.n,.nb,.ni,.nl,.nn,.py,.nv,.w,.bp,.vc,.vg,.vi,.p{color:#f8f8f2}.o,.nt,.ow,.gd,.kn{color:#f92672}.ld,.sb,.sc,.sd,.s2,.sh,.si,.sx,.sr,.s1,.ss,.s{color:#e6db74}.na,.nc,.nd,.ne,.nf,.nx,.gi{color:#a6e22e}

    </style>

    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Why Veil? - Chris Sainty</title>
<meta property="og:title" content="Why Veil?" />
<meta name="description" content="Recently I&#39;ve been working away on a new project Veil.Veil is my entry in to the .NET &quot;view engine&quot; / templates space.There isn&#39;t exactly an urgent need for a new solution to this problem and most are perfectly happy with Razor. So why did I go ahead and spend my time writing one?" />
<meta property="og:description" content="Recently I&#39;ve been working away on a new project Veil.Veil is my entry in to the .NET &quot;view engine&quot; / templates space.There isn&#39;t exactly an urgent need for a new solution to this problem and most are perfectly happy with Razor. So why did I go ahead and spend my time writing one?" />
<link rel="canonical" href="https://blog.csainty.com/2014/05/why-veil.html" />
<meta property="og:url" content="https://blog.csainty.com/2014/05/why-veil.html" />
<meta property="og:site_name" content="Chris Sainty" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-05-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@csainty" />
<meta name="twitter:creator" content="@Chris Sainty" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Why Veil?",
    "datePublished": "2014-05-10T00:00:00+00:00",
    "description": "Recently I&#39;ve been working away on a new project Veil.Veil is my entry in to the .NET &quot;view engine&quot; / templates space.There isn&#39;t exactly an urgent need for a new solution to this problem and most are perfectly happy with Razor. So why did I go ahead and spend my time writing one?",
    "url": "https://blog.csainty.com/2014/05/why-veil.html"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <header class="m-h">
    <h1><a href="https://blog.csainty.com">Chris Sainty</a></h1>
    <h2>A technical blog covering full-stack web development.</h2>
    <h2><a href="https://twitter.com/csainty" rel="external">twitter</a> | <a href="https://github.com/csainty" rel="external">github</a> | <a href="https://stackoverflow.com/users/625695/chris-sainty" rel="external">stackoverflow</a></h2>
  </header>

  <article>
    <span><time datetime="10 May 2014">10 May 2014</time>  </span>
    <h1>Why Veil?</h1>
    <section>
        <p>Recently I&#39;ve been working away on a new project <a href="https://github.com/csainty/Veil">Veil</a>.</p>

<p>Veil is my entry in to the .NET &quot;view engine&quot; / templates space.<br>
There isn&#39;t exactly an urgent need for a new solution to this problem and most are perfectly happy with Razor. So why did I go ahead and spend my time writing one?</p>

<!-- more -->

<p>Like all great software, it was written to scratch an itch.<br>
Veil isn&#39;t my first template solution, in fact my first post on this blog over 8 years ago was to share the solution I used back then.  </p>

<h4>How is Veil different?</h4>

<ol>
<li>Veil compiles your template down to IL, returning you an <code>Action&lt;TextWriter, TModel&gt;</code>. This compilation gives Veil a significant rendering performance advantage over most other template solutions available.</li>
<li>Veil is easy to use and integrate into your solution.</li>
<li>Veil does not define a syntax, instead it supports multiple syntax parsers.</li>
</ol>

<p>Let&#39;s dig further in to these.</p>

<h4>Compilation</h4>

<p>Like Razor, Veil does compilation of your templates. This scenario is optimized for templates that can be compiled once and then run many times.<br>
Unlike Razor though, Veil uses <a href="https://github.com/kevin-montrose/Sigil">Sigil</a> to emit IL to a DynamicMethod. It does not create assemblies. This makes Veil much easier to work with.  </p>

<h4>Simplicity</h4>

<p>Veil maintains a small surface area and can be dropped in to any project with ease. It is as simple as this</p>
<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="c1">// Register your parsers once at startup
</span><span class="n">VeilEngine</span><span class="p">.</span><span class="nf">RegisterParser</span><span class="p">(</span><span class="s">"supersimple"</span><span class="p">,</span> <span class="k">new</span> <span class="nf">SuperSimpleParser</span><span class="p">());</span>

<span class="c1">// Compile each template once with the chosen parser
</span><span class="kt">var</span> <span class="n">template</span> <span class="p">=</span> <span class="s">"Hello @Model.Name"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">compiledTemplate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">VeilEngine</span><span class="p">().</span><span class="n">Compile</span><span class="p">&lt;</span><span class="n">ViewModel</span><span class="p">&gt;(</span><span class="s">"supersimple"</span><span class="p">,</span> <span class="k">new</span> <span class="nf">StringReader</span><span class="p">(</span><span class="n">template</span><span class="p">));</span>

<span class="c1">// Execute your template as needed
</span><span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">writer</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringWriter</span><span class="p">())</span> <span class="p">{</span>
    <span class="nf">compiledTemplate</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="k">new</span> <span class="n">ViewModel</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Bob"</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<h4>Syntax</h4>

<p>Unusually Veil does not dictate a particular syntax for your templates. The Veil compiler accepts an abstract syntax tree which defines the template. This means Veil can support any number of syntax parsers all of which will benefit from the compilation and integration work done to the core.</p>

<p>Currently there are two syntaxes being targeted - <a href="https://github.com/csainty/Veil/tree/master/Src/Veil.SuperSimple">Veil.SuperSimple</a> and <a href="https://github.com/csainty/Veil/tree/master/Src/Veil.Handlebars">Veil.Handlebars</a>. These are a bit rough at the moment, but will be improved over time.</p>

<p>A goal is for it to be as simple as possible for people to port their favourite syntax over to Veil and create a drop-in replacements for whichever syntax their templates are currently written in.</p>

<h4>The future</h4>

<p>I&#39;ve just pushed out the first &quot;alpha&quot; packages for Veil. The immediate priority is to finish off the features I want in my 0.1.0 release and lock down the API.</p>

    </section>
</article>


  <footer class="m-f">
      <section class="copyright">All content copyright <a href="/">Chris Sainty</a> &copy; 2006-2017 &bull; All rights reserved.</section>
  </footer>
</body>
</html>
