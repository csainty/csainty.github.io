<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/images/favicon.png" />
    <style>
    html,body,li,p{margin:0;padding:0}p,ul,ol,.highlight{margin:1.6em 0}h1,h2,h3,h4{margin:0;padding:0;font-size:100%;font-weight:bold;text-rendering:optimizeLegibility;font-family:sans-serif}ul{list-style:none}html{box-sizing:border-box;font-size:62.5%}*{box-sizing:inherit}*:before,*:after{box-sizing:inherit}img{height:auto;max-width:100%}pre,code{font-family:monospace;margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:1rem 0;padding:0}blockquote{font-style:italic;margin:1.6em 0 1.6em -2.2em;padding:0 0 0 1.6em;border-left:#4a4a4a 0.4em solid}html{font-size:16px}@media screen and (min-width: 900px){html{font-size:18px}}@media screen and (min-width: 1200px){html{font-size:20px}}body{font-family:serif;color:#3A4145}h1{font-size:2rem;margin:10px 0 10px 0;letter-spacing:-1px}h2{font-size:1.4rem;letter-spacing:-1px}h3{font-size:1.2rem}h4{font-size:1.1rem}a:link,a:visited{color:inherit;text-decoration:none}a:hover{color:#57A3E8;transition:color ease 0.3s}p a:link,p a:visited{text-decoration:underline}pre{border:1px solid #E3EDF3;padding:10px;font-size:0.85em;border-radius:3px}code{padding:1px 3px;font-size:0.85em;white-space:pre;border:1px solid #E3EDF3;background:#F7FAFB;border-radius:2px}pre code{background:transparent;padding:0;border:0}.m-h{text-align:center;background-color:#303538;color:#fff;padding:1rem}.m-h h2{font-weight:normal;font-size:1.5rem}article{width:80%;margin:1rem auto;padding-bottom:1rem;border-bottom:#EBF2F6 1px solid;word-break:break-word;position:relative}article::after{display:block;content:"";width:7px;height:7px;border:#E7EEF2 1px solid;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:#fff 0 0 0 5px}.a-m{color:#9EABB3;font-size:0.8rem}.a-m a:hover{color:#9EABB3;text-decoration:underline}.a-h{margin-bottom:5px}.r-m{font-size:smaller}nav{position:relative;width:75%;margin:1rem auto;font-size:0.8rem;color:#9EABB3;text-align:center}.m-f{position:relative;margin:2rem 0 0 0;padding:1rem 1rem 2rem 1rem;border-top:#EBF2F6 1px solid;font-size:0.8rem;line-height:1.7em;color:#BBC7CC;text-align:center;background:#F7FAFB}.o-p,.n-p{position:absolute;display:inline-block;padding:0 0.5rem;border:#EBF2F6 2px solid;text-decoration:none;border-radius:30px;transition:border ease 0.3s}.o-p{right:0}.n-p{left:0}.t-h{width:80%;margin:0 auto}.highlight pre{background-color:#49483e;color:white;overflow:scroll}.ge{font-style:italic}.gs{font-weight:bold}.c,.cm,.cp,.c1,.gu,.cs{color:#75715e}.k,.kc,.kd,.kp,.kr,.no,.kt{color:#66d9ef}.l,.mf,.mh,.mi,.mo,.se,.il,.m{color:#ae81ff}.n,.nb,.ni,.nl,.nn,.py,.nv,.w,.bp,.vc,.vg,.vi,.p{color:#f8f8f2}.o,.nt,.ow,.gd,.kn{color:#f92672}.ld,.sb,.sc,.sd,.s2,.sh,.si,.sx,.sr,.s1,.ss,.s{color:#e6db74}.na,.nc,.nd,.ne,.nf,.nx,.gi{color:#a6e22e}

    </style>

    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Creating desktop apps with NodeJS - Chris Sainty</title>
<meta property="og:title" content="Creating desktop apps with NodeJS" />
<meta name="description" content="Last week an interesting thread was started on the NodeJS mailing list.  https://groups.google.com/d/msg/nodejs/iy7Re33dwyU/yxwLlx1aUNMJ  Roger Wang from the Intel Open Source Technology Center posted about a new project from their team called node-webkit.  https://github.com/rogerwang/node-webkit  node-webkit brings WebKit to NodeJS. With it, client side applications can be written with a HTML/CSS UI on the NodeJS platform. We believe the async I/O framework and Javascript language is a perfect combination for client (mobile) side applications.  " />
<meta property="og:description" content="Last week an interesting thread was started on the NodeJS mailing list.  https://groups.google.com/d/msg/nodejs/iy7Re33dwyU/yxwLlx1aUNMJ  Roger Wang from the Intel Open Source Technology Center posted about a new project from their team called node-webkit.  https://github.com/rogerwang/node-webkit  node-webkit brings WebKit to NodeJS. With it, client side applications can be written with a HTML/CSS UI on the NodeJS platform. We believe the async I/O framework and Javascript language is a perfect combination for client (mobile) side applications.  " />
<link rel="canonical" href="https://blog.csainty.com/2012/01/creating-desktop-apps-with-nodejs.html" />
<meta property="og:url" content="https://blog.csainty.com/2012/01/creating-desktop-apps-with-nodejs.html" />
<meta property="og:site_name" content="Chris Sainty" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-01-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@csainty" />
<meta name="twitter:creator" content="@Chris Sainty" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Creating desktop apps with NodeJS",
    "datePublished": "2012-01-10T00:00:00+00:00",
    "description": "Last week an interesting thread was started on the NodeJS mailing list.  https://groups.google.com/d/msg/nodejs/iy7Re33dwyU/yxwLlx1aUNMJ  Roger Wang from the Intel Open Source Technology Center posted about a new project from their team called node-webkit.  https://github.com/rogerwang/node-webkit  node-webkit brings WebKit to NodeJS. With it, client side applications can be written with a HTML/CSS UI on the NodeJS platform. We believe the async I/O framework and Javascript language is a perfect combination for client (mobile) side applications.  ",
    "url": "https://blog.csainty.com/2012/01/creating-desktop-apps-with-nodejs.html"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <header class="m-h">
    <h1><a href="https://blog.csainty.com">Chris Sainty</a></h1>
    <h2>A technical blog covering full-stack web development.</h2>
    <h2><a href="https://twitter.com/csainty" rel="external">twitter</a> | <a href="https://github.com/csainty" rel="external">github</a> | <a href="https://stackoverflow.com/users/625695/chris-sainty" rel="external">stackoverflow</a></h2>
  </header>

  <article>
    <span><time datetime="10 Jan 2012">10 Jan 2012</time>  </span>
    <h1>Creating desktop apps with NodeJS</h1>
    <section>
        <p>Last week an interesting thread was started on the NodeJS mailing list.  </p>

<p><a href="https://groups.google.com/d/msg/nodejs/iy7Re33dwyU/yxwLlx1aUNMJ">https://groups.google.com/d/msg/nodejs/iy7Re33dwyU/yxwLlx1aUNMJ</a>  </p>

<p>Roger Wang from the Intel Open Source Technology Center posted about a new project from their team called node-webkit.  </p>

<p><a href="https://github.com/rogerwang/node-webkit">https://github.com/rogerwang/node-webkit</a>  </p>

<blockquote>
<p>node-webkit brings WebKit to NodeJS. With it, client side applications can be written with a HTML/CSS UI on the NodeJS platform. We believe the async I/O framework and Javascript language is a perfect combination for client (mobile) side applications.  </p>
</blockquote>

<!-- more -->

<p>Basically it allows you to write HTML/JS/Node client side applications using webkit as the renderer.    </p>

<p>This is very interesting, and in some respects like the path Microsoft are taking with the HTML/JS WinRT in Windows 8.    </p>

<p>Currently this is Linux only. But with Node and WebKit both being cross-platform, it is only a matter of time until it gets onto other platforms.    </p>

<p>Getting started with a fresh Ubuntu 11.10 install in a VM I had to do the following to get it all installed.   </p>

<ol>
<li>Open up a text editor and edit the file <code>/etc/apt/sources.list</code></li>
<li>Add a new line at the end <code>deb http://libwebkitnode.s3.amazonaws.com/ oneiric/</code></li>
</ol>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get update
sudo apt-get install git-core nodejs-dev libwebkitnode-dev libev-dev
git clone https://github.com/rogerwang/node-webkit.git
<span class="nb">cd </span>node-webkit
node-waf
configure build
</code></pre></div>
<p>You can then test it is running with <code>node tests/helloworld.js tests/testfs.html</code></p>

<p>If everything goes to plan you, up should pop a window that lists the files in the current directory.  </p>

<p>Take a look at the <code>tests/testfs.html</code> to see how they have done that.  </p>

<p>Now on to my first test project. I am once again making a twitter search, it really is one of the easiest APIs around to quickly run up a test against.  </p>

<p>All the below code is on github at <a href="https://github.com/csainty/node-webkit-twitter">https://github.com/csainty/node-webkit-twitter</a>  </p>

<p>One note, I put a copy of node-webkit into the <code>node_modules</code> folder. I am sure it will come to npm eventually, but for now this was the easiest method.<br>
When I tried to reference it from it’s own folder, it could be found, but then my other dependencies couldn’t. I must be misunderstanding something there.  </p>

<p>Our <code>app.js</code> is very simple, this is the entry point to the app, configures the webkit browser surface and loads an initial page.  </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">nwebkit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-webkit'</span><span class="p">);</span>

<span class="nx">nwebkit</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="s1">'url'</span> <span class="p">:</span> <span class="s1">'index.html'</span><span class="p">,</span>
    <span class="s1">'width'</span> <span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="s1">'height'</span> <span class="p">:</span> <span class="mi">600</span>
<span class="p">});</span>

</code></pre></div>
<p><code>index.html</code> is also pretty straight forward, it is just basic HTML with Knockout bindings. It includes script references for jQuery, <a href="http://csainty.blogspot.com/2011/10/learn-something-new-knockout-js.html">Knockout</a> and our own index.js  </p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>node-webkit-twitter<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">"jquery-1.7.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">"knockout-2.1.0pre.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">"index.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h1&gt;</span>node-webkit-twitter<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;div&gt;</span>
    Enter a search term <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">data-bind=</span><span class="s">"value: searchTerm"</span> <span class="nt">/&gt;</span>.<span class="nt">&lt;br/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">data-bind=</span><span class="s">"click: search"</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;ul</span> <span class="na">data-bind=</span><span class="s">"foreach: results"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;span</span> <span class="na">data-bind=</span><span class="s">"text: text"</span><span class="nt">&gt;&lt;/span&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>Now for <code>index.js</code>, this is where the really interesting code is.  </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">IndexViewModel</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">searchTerm</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observableArray</span><span class="p">();</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'http://search.twitter.com/search.json?q='</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">searchTerm</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">tweets</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>

                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">tweets</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">vm</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
                    <span class="p">})</span>                  
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">ko</span><span class="p">.</span><span class="nx">applyBindings</span><span class="p">(</span><span class="k">new</span> <span class="nx">IndexViewModel</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>
<p>You can freely mix your traditional browser based HTML with your node.  </p>

<p>So we call in our dependency on the <a href="https://github.com/mikeal/request">request</a> module. We then use jQuery to delay our execution until the page is loaded. We use Knockout to create our ViewModel which binds itself to the HTML.<br>
Then in the search function on the ViewModel we call out to request to fetch the data from twitter.  </p>

<p>Now of cource everything in this little demo can be done client side already. But I wanted to keep it simple, we can get to the filesystem (as the intel demo shows) and we can use existing libraries to get to a database or other persistence layer.  </p>

<p>To fire it up just run <code>node app.js</code></p>

<p><img src="/images/1382874053234.jpg" alt="Node"></p>

<p>I hope to put together a more in-depth demo soon, one that involves local storage, and one of the HTML5 UI frameworks to pretty it up a bit. I’ll keep you posted on how that goes.  </p>

<p>Remember I am on twitter these days as well <a href="http://twitter.com/csainty">@csainty</a>. So follow me there if you want to know what I am up to.  </p>

    </section>
</article>


  <footer class="m-f">
      <section class="copyright">All content copyright <a href="/">Chris Sainty</a> &copy; 2006-2017 &bull; All rights reserved.</section>
  </footer>
</body>
</html>
